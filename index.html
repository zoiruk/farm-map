<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ä—Ç–∞ –§–µ—Ä–º –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏–∏ - –°–µ–∑–æ–Ω–Ω—ã–µ –†–∞–±–æ—Ç–Ω–∏–∫–∏</title>
    
    <!-- Material Design 3 -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Meta tags -->
    <meta name="description" content="–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ —Ñ–µ—Ä–º –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏–∏ –¥–ª—è —Å–µ–∑–æ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ —Å –æ—Ç–∑—ã–≤–∞–º–∏ –∏ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏">
    <meta name="keywords" content="—Ñ–µ—Ä–º—ã, –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è, —Å–µ–∑–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞, seasonal worker, UK farms">
    <meta name="author" content="UK Farms Map">
    
    <!-- PWA -->
    <meta name="theme-color" content="#2e7d32">
    <link rel="manifest" href="manifest.json">
    
    <!-- Telegram Web App -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="app-header">
        <div class="header-content">
            <h1 class="app-title">
                <span class="material-symbols-outlined">agriculture</span>
                <span class="title-full">–ö–∞—Ä—Ç–∞ –§–µ—Ä–º UK</span>
                <span class="title-short">–§–µ—Ä–º—ã UK</span>
            </h1>
            <div class="header-actions">
                <button class="btn-icon" id="refreshBtn" title="–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ">
                    <span class="material-symbols-outlined">refresh</span>
                </button>
                <button class="btn-icon" id="statsBtn" title="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞">
                    <span class="material-symbols-outlined">analytics</span>
                </button>
                <button class="btn-icon hidden" id="installBtn" title="–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ">
                    <span class="material-symbols-outlined">install_mobile</span>
                </button>
                <button class="btn-primary" id="loginHeaderBtn">
                    <span class="material-symbols-outlined">login</span>
                    <span class="btn-text-full">–í–æ–π—Ç–∏</span>
                    <span class="btn-text-short">–í–æ–π—Ç–∏</span>
                </button>
                <button class="btn-primary" id="addFarmBtn">
                    <span class="material-symbols-outlined">add</span>
                    <span class="btn-text-full">–î–æ–±–∞–≤–∏—Ç—å —Ñ–µ—Ä–º—É</span>
                    <span class="btn-text-short">–î–æ–±–∞–≤–∏—Ç—å</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Search and Filter Panel -->
        <div class="search-panel">
            <div class="search-container">
                <div class="search-input-group">
                    <span class="material-symbols-outlined search-icon">search</span>
                    <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ —Ñ–µ—Ä–º..." class="search-input">
                    <button class="btn-icon" id="clearSearchBtn" title="–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫">
                        <span class="material-symbols-outlined">clear</span>
                    </button>
                </div>
                
                <div class="filter-controls">
                    <button class="btn-filter" id="toggleFiltersBtn">
                        <span class="material-symbols-outlined">tune</span>
                        –§–∏–ª—å—Ç—Ä—ã
                    </button>
                    
                    <div class="active-filters" id="activeFilters">
                        <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </div>
            
            <!-- Expandable Filters -->
            <div class="filters-panel hidden" id="filtersPanel">
                <div class="filters-grid">
                    <div class="filter-group">
                        <label for="typeFilter">–¢–∏–ø —Ñ–µ—Ä–º—ã</label>
                        <select id="typeFilter" class="filter-select">
                            <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
                            <option value="vegetables">ü•¨ –û–≤–æ—â–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                            <option value="tomatoes">üçÖ –¢–æ–º–∞—Ç–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                            <option value="berries">üçì –Ø–≥–æ–¥–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                            <option value="mushrooms">üçÑ –ì—Ä–∏–±–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                            <option value="flowers">üå∑ –¶–≤–µ—Ç–æ—á–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                            <option value="apples">üçé –Ø–±–ª–æ—á–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="operatorFilter">–û–ø–µ—Ä–∞—Ç–æ—Ä</label>
                        <select id="operatorFilter" class="filter-select">
                            <option value="">–í—Å–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã</option>
                            <option value="AgriHR">AgriHR</option>
                            <option value="Concordia">Concordia</option>
                            <option value="Fruitful Jobs">Fruitful Jobs</option>
                            <option value="Pro-Force">Pro-Force</option>
                            <option value="HOPS">HOPS</option>
                            <option value="Other">–î—Ä—É–≥–æ–π</option>
                        </select>
                    </div>
                </div>
                
                <div class="filter-actions">
                    <button class="btn-secondary" id="clearFiltersBtn">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
                    <button class="btn-primary" id="applyFiltersBtn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- Map Container -->
        <div id="map" class="map-container"></div>
        
        <!-- Farm Info Panel -->
        <div id="farmInfoPanel" class="farm-info-panel hidden">
            <div class="farm-info-backdrop" id="farmInfoBackdrop"></div>
            <div class="farm-info-card">
                <div class="panel-header">
                    <h3 id="farmInfoTitle">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–µ—Ä–º–µ</h3>
                    <button class="btn-icon" id="closePanelBtn">
                        <span class="material-symbols-outlined">close</span>
                    </button>
                </div>
                <div class="panel-content" id="farmInfoContent">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
                </div>
            </div>
        </div>
    </main>

    <!-- Add Farm Modal -->
    <div id="addFarmModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ–µ—Ä–º—É</h2>
                <button class="btn-icon" id="closeModalBtn">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <form id="addFarmForm" class="modal-body">
                <div class="form-group">
                    <label for="farmType">–¢–∏–ø —Ñ–µ—Ä–º—ã</label>
                    <select id="farmType" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ñ–µ—Ä–º—ã</option>
                        <option value="vegetables">ü•¨ –û–≤–æ—â–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                        <option value="tomatoes">üçÖ –¢–æ–º–∞—Ç–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                        <option value="berries">üçì –Ø–≥–æ–¥–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                        <option value="mushrooms">üçÑ –ì—Ä–∏–±–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                        <option value="flowers">üå∑ –¶–≤–µ—Ç–æ—á–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                        <option value="apples">üçé –Ø–±–ª–æ—á–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="farmName">–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–µ—Ä–º—ã</label>
                    <input type="text" id="farmName" required autocomplete="off">
                    <div id="farmNameSuggestions" class="suggestions-dropdown"></div>
                </div>

                <div class="form-group">
                    <label for="farmAddress">–ê–¥—Ä–µ—Å</label>
                    <input type="text" id="farmAddress" required>
                </div>

                <div class="form-group">
                    <label for="farmPostcode">–ü–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å (UK Postcode)</label>
                    <input type="text" id="farmPostcode" required pattern="[A-Z]{1,2}[0-9R][0-9A-Z]? [0-9][A-Z]{2}" placeholder="SW1A 1AA">
                </div>

                <div class="form-group">
                    <label for="farmOperator">–û–ø–µ—Ä–∞—Ç–æ—Ä</label>
                    <select id="farmOperator" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞</option>
                        <option value="AgriHR">AgriHR</option>
                        <option value="Concordia">Concordia</option>
                        <option value="Fruitful Jobs">Fruitful Jobs</option>
                        <option value="Pro-Force">Pro-Force</option>
                        <option value="HOPS">HOPS</option>
                        <option value="Other">–î—Ä—É–≥–æ–π</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="farmRating">–†–µ–π—Ç–∏–Ω–≥ (1-5 –∑–≤–µ–∑–¥)</label>
                    <div class="rating-input">
                        <input type="range" id="farmRating" min="1" max="5" value="3">
                        <div class="rating-display" id="ratingDisplay">‚≠ê‚≠ê‚≠ê</div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="farmComment">–û—Ç–∑—ã–≤</label>
                    <textarea id="farmComment" rows="4" placeholder="–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã –Ω–∞ —ç—Ç–æ–π —Ñ–µ—Ä–º–µ..."></textarea>
                </div>

                <div class="form-group">
                    <label for="farmEarnings">–û–±—â–∏–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫ –∑–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç/—Å–µ–∑–æ–Ω (¬£)</label>
                    <input type="number" id="farmEarnings" placeholder="8000" min="0" step="100">
                    <small>–£–∫–∞–∂–∏—Ç–µ —Ç–æ–ª—å–∫–æ —Å—É–º–º—É –≤ —Ñ—É–Ω—Ç–∞—Ö —Å—Ç–µ—Ä–ª–∏–Ω–≥–æ–≤</small>
                </div>

                <div class="form-group">
                    <label for="farmDuration">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã</label>
                    <select id="farmDuration" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</option>
                        <option value="1 –º–µ—Å—è—Ü">1 –º–µ—Å—è—Ü</option>
                        <option value="2 –º–µ—Å—è—Ü–∞">2 –º–µ—Å—è—Ü–∞</option>
                        <option value="3 –º–µ—Å—è—Ü–∞">3 –º–µ—Å—è—Ü–∞</option>
                        <option value="4 –º–µ—Å—è—Ü–∞">4 –º–µ—Å—è—Ü–∞</option>
                        <option value="5 –º–µ—Å—è—Ü–µ–≤">5 –º–µ—Å—è—Ü–µ–≤</option>
                        <option value="6 –º–µ—Å—è—Ü–µ–≤">6 –º–µ—Å—è—Ü–µ–≤ (–ø–æ–ª–Ω—ã–π —Å–µ–∑–æ–Ω)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="userEmail">–í–∞—à Gmail</label>
                    <input type="email" id="userEmail" required placeholder="your.email@gmail.com">
                    <small>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Å–≤—è–∑–∏</small>
                </div>
            </form>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="cancelBtn">–û—Ç–º–µ–Ω–∞</button>
                <button type="submit" form="addFarmForm" class="btn-primary">–î–æ–±–∞–≤–∏—Ç—å —Ñ–µ—Ä–º—É</button>
            </div>
        </div>
    </div>

    <!-- Add Review Modal -->
    <div id="addReviewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –æ —Ñ–µ—Ä–º–µ</h2>
                <button class="btn-icon" id="closeReviewModalBtn">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <form id="addReviewForm" class="modal-body">
                <div class="form-group">
                    <label for="reviewRating">–†–µ–π—Ç–∏–Ω–≥ (1-5 –∑–≤–µ–∑–¥)</label>
                    <div class="rating-input">
                        <input type="range" id="reviewRating" min="1" max="5" value="3">
                        <div class="rating-display" id="reviewRatingDisplay">‚≠ê‚≠ê‚≠ê</div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="reviewComment">–í–∞—à –æ—Ç–∑—ã–≤</label>
                    <textarea id="reviewComment" rows="4" required placeholder="–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã –Ω–∞ —ç—Ç–æ–π —Ñ–µ—Ä–º–µ..."></textarea>
                </div>

                <div class="form-group">
                    <label for="reviewEarnings">–û–±—â–∏–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫ –∑–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç/—Å–µ–∑–æ–Ω (¬£)</label>
                    <input type="number" id="reviewEarnings" placeholder="8000" min="0" step="100">
                    <small>–£–∫–∞–∂–∏—Ç–µ —Ç–æ–ª—å–∫–æ —Å—É–º–º—É –≤ —Ñ—É–Ω—Ç–∞—Ö —Å—Ç–µ—Ä–ª–∏–Ω–≥–æ–≤</small>
                </div>

                <div class="form-group">
                    <label for="reviewDuration">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã</label>
                    <select id="reviewDuration" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</option>
                        <option value="1 –º–µ—Å—è—Ü">1 –º–µ—Å—è—Ü</option>
                        <option value="2 –º–µ—Å—è—Ü–∞">2 –º–µ—Å—è—Ü–∞</option>
                        <option value="3 –º–µ—Å—è—Ü–∞">3 –º–µ—Å—è—Ü–∞</option>
                        <option value="4 –º–µ—Å—è—Ü–∞">4 –º–µ—Å—è—Ü–∞</option>
                        <option value="5 –º–µ—Å—è—Ü–µ–≤">5 –º–µ—Å—è—Ü–µ–≤</option>
                        <option value="6 –º–µ—Å—è—Ü–µ–≤">6 –º–µ—Å—è—Ü–µ–≤ (–ø–æ–ª–Ω—ã–π —Å–µ–∑–æ–Ω)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="reviewEmail">–í–∞—à Gmail</label>
                    <input type="email" id="reviewEmail" required placeholder="your.email@gmail.com">
                    <small>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Å–≤—è–∑–∏</small>
                </div>
            </form>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="cancelReviewBtn">–û—Ç–º–µ–Ω–∞</button>
                <button type="submit" form="addReviewForm" class="btn-primary">–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
                <button class="btn-icon" id="closeLoginBtn">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 24px;">
                    <p style="color: var(--md-sys-color-on-surface-variant); margin-bottom: 20px;">
                        –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É:
                    </p>
                </div>
                
                <!-- Option 1: Login with existing email -->
                <div class="login-option" style="margin-bottom: 24px; padding: 20px; border: 1px solid var(--md-sys-color-outline-variant); border-radius: 12px;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                        <span class="material-symbols-outlined" style="color: var(--md-sys-color-primary);">login</span>
                        <h3 style="margin: 0; color: var(--md-sys-color-on-surface);">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç?</h3>
                    </div>
                    <p style="color: var(--md-sys-color-on-surface-variant); font-size: 14px; margin-bottom: 16px;">
                        –ï—Å–ª–∏ –≤—ã —É–∂–µ –¥–æ–±–∞–≤–ª—è–ª–∏ —Ñ–µ—Ä–º—ã –∏–ª–∏ –æ—Ç–∑—ã–≤—ã, –≤–æ–π–¥–∏—Ç–µ –ø–æ —Å–≤–æ–µ–º—É email
                    </p>
                    <div class="form-group">
                        <label for="loginEmail">–í–∞—à Gmail</label>
                        <input type="email" id="loginEmail" placeholder="your.email@gmail.com">
                    </div>
                    <button type="button" class="btn-primary" id="loginBtn" style="width: 100%;">
                        <span class="material-symbols-outlined">login</span>
                        –í–æ–π—Ç–∏
                    </button>
                </div>
                
                <!-- Option 2: Register by adding review -->
                <div class="login-option" style="padding: 20px; border: 1px solid var(--md-sys-color-primary); border-radius: 12px; background: linear-gradient(135deg, var(--md-sys-color-primary-container), var(--md-sys-color-surface));">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                        <span class="material-symbols-outlined" style="color: var(--md-sys-color-primary);">add_comment</span>
                        <h3 style="margin: 0; color: var(--md-sys-color-on-primary-container);">–ü–µ—Ä–≤—ã–π —Ä–∞–∑ –∑–¥–µ—Å—å?</h3>
                    </div>
                    <p style="color: var(--md-sys-color-on-surface-variant); font-size: 14px; margin-bottom: 16px;">
                        –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã –Ω–∞ —Ñ–µ—Ä–º–µ –∏ –ø–æ–ª—É—á–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
                    </p>
                    <div style="display: flex; gap: 8px; margin-bottom: 16px;">
                        <span style="background: var(--md-sys-color-primary); color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px;">‚ú® –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø</span>
                        <span style="background: var(--md-sys-color-primary); color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px;">ü§ù –ü–æ–º–æ—â—å —Å–æ–æ–±—â–µ—Å—Ç–≤—É</span>
                    </div>
                    <button type="button" class="btn-primary" id="registerByReviewBtn" style="width: 100%; background: var(--md-sys-color-primary);">
                        <span class="material-symbols-outlined">add</span>
                        –î–æ–±–∞–≤–∏—Ç—å —Ñ–µ—Ä–º—É –∏ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="cancelLoginBtn">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- Statistics Modal -->
    <div id="statsModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–µ—Ä–º</h2>
                <button class="btn-icon" id="closeStatsBtn">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- –§–∏–ª—å—Ç—Ä—ã –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
                <div class="stats-filters" style="margin-bottom: 24px; padding: 16px; background-color: var(--md-sys-color-surface-variant); border-radius: 12px;">
                    <h3 style="margin: 0 0 16px 0; color: var(--md-sys-color-on-surface); font-size: 16px;">
                        <span class="material-symbols-outlined" style="vertical-align: middle; margin-right: 8px;">tune</span>
                        –§–∏–ª—å—Ç—Ä—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                    </h3>
                    <div class="stats-filters-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                        <div class="filter-group">
                            <label for="statsTypeFilter">–¢–∏–ø —Ñ–µ—Ä–º—ã</label>
                            <select id="statsTypeFilter" class="filter-select">
                                <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
                                <option value="vegetables">ü•¨ –û–≤–æ—â–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                                <option value="tomatoes">üçÖ –¢–æ–º–∞—Ç–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                                <option value="berries">üçì –Ø–≥–æ–¥–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                                <option value="mushrooms">üçÑ –ì—Ä–∏–±–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                                <option value="flowers">üå∑ –¶–≤–µ—Ç–æ—á–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                                <option value="apples">üçé –Ø–±–ª–æ—á–Ω–∞—è —Ñ–µ—Ä–º–∞</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="statsOperatorFilter">–û–ø–µ—Ä–∞—Ç–æ—Ä</label>
                            <select id="statsOperatorFilter" class="filter-select">
                                <option value="">–í—Å–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã</option>
                                <option value="AgriHR">AgriHR</option>
                                <option value="Concordia">Concordia</option>
                                <option value="Fruitful Jobs">Fruitful Jobs</option>
                                <option value="Pro-Force">Pro-Force</option>
                                <option value="HOPS">HOPS</option>
                                <option value="Other">–î—Ä—É–≥–æ–π</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="statsSortFilter">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∑–∞—Ä–∞–±–æ—Ç–∫—É</label>
                            <select id="statsSortFilter" class="filter-select">
                                <option value="">–ë–µ–∑ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</option>
                                <option value="earnings_high_to_low">üí∞ –û—Ç –≤—ã—Å–æ–∫–æ–≥–æ –∫ –Ω–∏–∑–∫–æ–º—É</option>
                                <option value="earnings_low_to_high">üí∏ –û—Ç –Ω–∏–∑–∫–æ–≥–æ –∫ –≤—ã—Å–æ–∫–æ–º—É</option>
                                <option value="rating_high_to_low">‚≠ê –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É (–≤—ã—Å–æ–∫–∏–π)</option>
                                <option value="rating_low_to_high">‚≠ê –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É (–Ω–∏–∑–∫–∏–π)</option>
                            </select>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 16px;">
                        <button class="btn-secondary" id="clearStatsFiltersBtn">–°–±—Ä–æ—Å–∏—Ç—å</button>
                        <button class="btn-primary" id="applyStatsFiltersBtn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                    </div>
                </div>
                
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
                <div id="statsContent">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
                </div>
            </div>
        </div>
    </div>

    <!-- User Profile Modal -->
    <div id="profileModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2>üë§ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
                <button class="btn-icon" id="closeProfileBtn">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="modal-body" id="profileContent">
                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–æ—Ñ–∏–ª—è -->
            </div>
        </div>
    </div>

    <!-- Offline Indicator -->
    <div id="offlineIndicator" class="offline-indicator hidden">
        <span class="material-symbols-outlined">wifi_off</span>
        <span>–û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º</span>
    </div>

    <!-- Update Available Banner -->
    <div id="updateBanner" class="update-banner hidden">
        <div class="update-content">
            <span class="material-symbols-outlined">system_update</span>
            <span>–î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</span>
            <button class="btn-secondary" id="updateBtn">–û–±–Ω–æ–≤–∏—Ç—å</button>
            <button class="btn-icon" id="dismissUpdateBtn">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer" class="notification-container"></div>

    <!-- Advertisement Banner -->
    <div class="ad-banner">
        <div class="ad-content">
            <div class="ad-header">
                <div class="ad-label">
                    <span class="material-symbols-outlined">account_balance</span>
                    <strong>–†–µ–∫–ª–∞–º–∞</strong>
                </div>
            </div>
            <div class="ad-text">
                <span class="ad-text-full">
                    <strong>White Tax Returns</strong> ‚Äî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞–ª–æ–≥–æ–≤–æ–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ –∏ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–π –æ—Ç–¥–µ–ª Fruitful Jobs –∏ Agri HR. –í–µ—Ä–Ω–∏—Ç–µ —Å–≤–æ–∏ –Ω–∞–ª–æ–≥–∏ –±—ã—Å—Ç—Ä–æ –∏ —á–µ—Å—Ç–Ω–æ ‚Äî 
                    <a href="https://whitetax.site/sng" target="_blank" class="ad-button-inline">
                        <span class="material-symbols-outlined">open_in_new</span>
                        –ø–æ–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É —Å–µ–π—á–∞—Å
                    </a>.
                </span>
                <span class="ad-text-mobile">
                    <strong>White Tax Returns</strong> ‚Äî –í–µ—Ä–Ω–∏—Ç–µ –Ω–∞–ª–æ–≥–∏ –±—ã—Å—Ç—Ä–æ –∏ —á–µ—Å—Ç–Ω–æ ‚Äî 
                    <a href="https://whitetax.site/sng" target="_blank" class="ad-button-inline">
                        <span class="material-symbols-outlined">open_in_new</span>
                        –ø–æ–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É —Å–µ–π—á–∞—Å
                    </a>!
                </span>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="config.js"></script>
    <script src="app.js"></script>
    
    <!-- PWA Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>
